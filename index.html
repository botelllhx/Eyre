<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@200;300;500&display=swap" rel="stylesheet" />
  <link rel="icon" type="image/png" href="./home/imagens/icon.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="stylesheet" href="./home/style.css" />
  <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.3.0/css/fontawesome.min.css" />
  <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.3.0/css/solid.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.3.0/css/brands.min.css" />
  <link rel="icon" href="./home/imagens/icon.png" type="image/x-icon" />
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr@4.6.9/dist/flatpickr.min.css">
  <link rel="stylesheet" href="https://npmcdn.com/flatpickr/dist/l10n/pt.js">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Eyre - Viagens acessíveis</title>
</head>

<body>
  <div class="body">
    <div class="logoELogin">
      <img src="./home/imagens/logo.png" class="logo" />
      <a href="./loginCadastro/login.html"><img src="./home/imagens/login.png" class="login" /></a>
      <div class="entrarOuCadastrar" id="entrarOuCadastrar">
        <a href="./loginCadastro/login.html">
          <h3>Entre ou cadastre-se</h3>
        </a>
      </div>
    </div>
    <div class="textoConvidativo">
      <p>
        Deseja fazer uma viagem acessível e <br />
        personalizada? Então você veio ao <br />
        lugar certo!
      </p>
    </div>
    <div class="divBotaoComecar">
      <a href="#fundoClaro" id="scrollButton"><button class="botaoComecar">CLIQUE PARA COMEÇAR</button></a>
    </div>
  </div>

  <div id="fundoClaro">
    <div class="fundoBranco">
      <div class="alinha-esquerda-direita">
        <asside class="esquerda">
          <h1 class="tituloDestino">Encontre o seu destino</h1>

          <form id="formularioViagem" onsubmit="enviarRequisicao(event)">


            <input class="botaoOrcamento imgSifao" type="text" id="orcamento" name="preco"
              placeholder="QUAL É O SEU ORÇAMENTO?" oninput="formatarMoeda(this); ocultarImagemSifao();"
              maxlength="15" />


            <div class="alinharPartidaDestino">
              <select class="botaoPartida" id="partida" name="lugar">
                <option value="" disabled selected>
                  Partida
                </option>
                <!-- <option value="AC">Acre</option>
            <option value="AL">Alagoas</option>
            <option value="AP">Amapá</option>
            <option value="AM">Amazonas</option> -->
                <option value="Salvador, Bahia">Bahia</option>
                <!-- <option value="CE">Ceará</option>
            <option value="DF">Distrito Federal</option>
            <option value="ES">Espírito Santo</option>
            <option value="GO">Goiás</option>
            <option value="MA">Maranhão</option>
            <option value="MT">Mato Grosso</option>
            <option value="MS">Mato Grosso do Sul</option> -->
                <option value="Belo Horizonte, Minas Gerais">Minas Gerais</option>
                <!-- <option value="PA">Pará</option>
            <option value="PB">Paraíba</option>
            <option value="PR">Paraná</option>
            <option value="PE">Pernambuco</option>
            <option value="PI">Piauí</option> -->
                <option value="Rio de Janeiro, Rio de Janeiro">Rio de Janeiro</option>
                <!-- <option value="RN">Rio Grande do Norte</option>
            <option value="RS">Rio Grande do Sul</option>
            <option value="RO">Rondônia</option>
            <option value="RR">Roraima</option>
            <option value="SC">Santa Catarina</option> -->
                <option value="Sao Paulo, Sao Paulo">São Paulo</option>
                <!-- <option value="SE">Sergipe</option>
            <option value="TO">Tocantins</option> -->
              </select>
              <img src="./home/imagens/setas.png" class="imgSetas">
              <select class="botaoDestino" id="destino" name="lugar">
                <option value="" disabled selected>
                  Destino
                </option>
                <!-- <option value="AC">Acre</option>
            <option value="AL">Alagoas</option>
            <option value="AP">Amapá</option>
            <option value="AM">Amazonas</option> -->
                <option value="Salvador, Bahia">Bahia</option>
                <!-- <option value="CE">Ceará</option>
            <option value="DF">Distrito Federal</option>
            <option value="ES">Espírito Santo</option>
            <option value="GO">Goiás</option>
            <option value="MA">Maranhão</option>
            <option value="MT">Mato Grosso</option>
            <option value="MS">Mato Grosso do Sul</option> -->
                <option value="Belo Horizonte, Minas Gerais">Minas Gerais</option>
                <!-- <option value="PA">Pará</option>
            <option value="PB">Paraíba</option>
            <option value="PR">Paraná</option>
            <option value="PE">Pernambuco</option>
            <option value="PI">Piauí</option> -->
                <option value="Rio de Janeiro, Rio de Janeiro">Rio de Janeiro</option>
                <!-- <option value="RN">Rio Grande do Norte</option>
            <option value="RS">Rio Grande do Sul</option>
            <option value="RO">Rondônia</option>
            <option value="RR">Roraima</option>
            <option value="SC">Santa Catarina</option> -->
                <option value="Sao Paulo, Sao Paulo">São Paulo</option>
                <!-- <option value="SE">Sergipe</option>
            <option value="TO">Tocantins</option> -->
              </select>
            </div>
            <div class="div-father">
              <div class="input-group-1">
                <input type="text" id="az-date-range" class="DateInput" name="az-date-range"
                  placeholder="Data de ida - Data de volta">
                <div class="divCheckBox">
                  <div class="custom-checkbox" onclick="toggleCustomCheck(this)">
                    <div class="check-mark"></div>
                  </div>
                  <span class="checkbox-label">Exibir transportes com datas extras?</span>
                </div>
                <div class="divBotaoJornadas">
                  <button type="submit" class="botaoJornadas">BUSCAR JORNADAS</button>
                </div>
              </div>
            </div>

          </form>
        </asside>

        <asside class="direita">
          <div class="dica">
            Gostaria de uma dica de lugar para visitar?
            <img src="./home/imagens/lampada.png" class="lampada" />
            <img class="paisagem" id="minha-imagem" src="./home/imagens/paisagem.jpg" onmouseover="trocaImagem()"
              onmouseout="retornaImagem()" />
          </div>
        </asside>
      </div>
    </div>
  </div>
  </div>
  <div class="rodape">
    <div class="inlineEstrelas">
      <img src="./home/imagens/estrelas.png" class="imgEstrelas">
      <h1 class="tituloAvaliacoes">Avaliações</h1>
      <img src="./home/imagens/estrelas.png" class="imgEstrelas">
    </div>
    <div class="inlineAvaliacoes">
      <div class="avaliacoes">
        <div>
          <img src="./home/imagens/aspa.png" class="imgAspa">
        </div>
        <p class="avaliacaoIndividual">Eu sou uma pessoa muito organizada e gosto de ter o controle sobre meu
          orçamento
          de
          viagem. A Eyre me permitiu definir o meu orçamento e encontrar opções que cabiam dentro dele. Tudo foi
          perfeito, desde a reserva até o pouso. Obrigado por uma viagem inesquecível!</p>
        <div class="fotoENome">
          <img src="./home/imagens/rafael.jpg" class="imgAvaliador">
          <p class="nomeAvaliador">RAFAEL,</br>
            MINHA CIDADE, MG</p>
        </div>
      </div>
      <div class="avaliacoes">
        <div>
          <img src="./home/imagens/aspa.png" class="imgAspa">
        </div>
        <p class="avaliacaoIndividual">Eu usei a Eyre para planejar minhas férias recentes e fiquei surpreso com a
          quantidade de opções disponíveis dentro do meu orçamento. A viagem foi incrível e eu recomendo este site
          a qualquer pessoa procurando por viagens acessíveis.</p>
        <div class="fotoENome">
          <img src="./home/imagens/kaik.jpg" class="imgAvaliador">
          <p class="nomeAvaliador">KAIK,</br>
            BELO HORIZONTE, MG</p>
        </div>
      </div>
      <div class="avaliacoes">
        <div>
          <img src="./home/imagens/aspa.png" class="imgAspa">
        </div>
        <p class="avaliacaoIndividual">Eu já usei outros sites de viagens antes, mas este é de longe o melhor quando
          se
          trata de pacotes baseados em um orçamento. Adorei a flexibilidade de ser capaz de definir meu orçamento
          e encontrar opções que cabiam dentro dele. A equipe de atendimento ao cliente também foi incrível e me
          ajudou com todas as minhas perguntas e preocupações.</p>
        <div class="fotoENome">
          <img src="./home/imagens/allan.jpg" class="imgAvaliador">
          <p class="nomeAvaliador">ALLAN,</br>
            CONTAGEM, MG</p>
        </div>
      </div>
    </div>
    <footer>
      <div class="fundoClaroRodape">
        <div class="inlineInfoAdicionais">
          <nav>
            <ul>
              <li>Países</li>
              <li>Regiões</li>
              <li>Cidades</li>
              <li>Bairros</li>
              <li>Aeroportos</li>
              <li>Hotéis</li>
              <li>Locais de interesse</li>
            </ul>
          </nav>
          <nav>
            <ul>
              <li>Casas e apartamentos</a></li>
              <li>Apartamentos</a></li>
              <li>Resorts</a></li>
              <li>Villas</a></li>
              <li>Hostels</a></li>
              <li>Cama e Cafés (B&Bs)</a></li>
              <li>Casas de hóspedes</a></li>
            </ul>
          </nav>
          <nav>
            <ul>
              <li>Latam</a></li>
              <li>Azul</a></li>
              <li>Gol</a></li>
              <li>United</a></li>
            </ul>
          </nav>
          <div>
            <img src="./home/imagens/logoEyreRodape.png" class="imgLogoEyreRodape">
          </div>
        </div>
      </div>
      <div>
        <h2 class="formasPagamento">Formas de pagamento</h2>
      </div>
      <div class="centralizarImgBandeirasCartao">
        <img src="./home/imagens/bandeirasCartao.png" class="imgBandeirasCartao">
      </div>
      <hr class="linhaHorizontal">
      <div class="alinharEmail">
        <h2 class="email">eyre@contact.com.br</h2>
      </div>
      <div>
        <h2 class="conecteConosco">CONECTE-SE CONOSCO</h2>
      </div>
      <div class="inlineRedesSociais">
        <img src="./home/imagens/instagram.png">
        <img src="./home/imagens/twitter.png">
        <img src="./home/imagens/linkedin.png">
        <img src="./home/imagens/facebook.png">
      </div>
      <div class="alinharEndereco">
        <h3 class="endereco">Eyre Viagens Ltda, CNPJ: 00.000.000/0001-00, Rua Paineiras, 1300 - Eldorado, CEP
          30.000-000,
          Contagem/MG.</h3>
      </div>
    </footer>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr@4.6.9/dist/flatpickr.min.js"></script>
  <script src="https://npmcdn.com/flatpickr/dist/l10n/pt.js"></script>
  <script>
    var calendar = flatpickr("#az-date-range", {
      mode: "range",
      dateFormat: "d/m/Y",
      showMonths: 2,
      locale: "pt",
      position: "below",
      onChange: function (calendar) {
        if (calendar.length == 2) {
          var start = calendar[0].toLocaleDateString("pt-BR");
          var end = calendar[1].toLocaleDateString("pt-BR");

          $("#az-start-date").val(start);
          $("#az-end-date").val(end);
        }
      },
    });
  </script>
  <script>
    async function enviarRequisicao(event, url, metodo, dados) {
      event.preventDefault();
      // Capturar os valores dos campos do formulário
      var orcamento = document.getElementById('orcamento').value;
      var destino = document.getElementById('destino').value;
      var partida = document.getElementById('partida').value;

      // Capturar o array de datas selecionadas
      var selectedDates = calendar.selectedDates;

      // Verificar se as duas datas foram selecionadas
      if (selectedDates.length === 2) {
        var dataIda = selectedDates[0].toLocaleDateString("pt-BR");
        var dataVolta = selectedDates[1].toLocaleDateString("pt-BR");

        // dados da requisição

        var data = {
          page: 0,
          pageSize: 10,
          order: "id",
          direction: "asc",
          content: {
            orcamento: orcamento,
            partida: partida,
            destino: destino,
            dataIda: dataIda,
            dataVolta: dataVolta
          }
        };

        var token = localStorage.getItem("token"); // Ou sessionStorage
        console.log(token);
        // Fazer a requisição usando fetch https://jsonplaceholder.typicode.com/posts http://localhost:3189/api/hospedagem/list'
        const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
          method: 'POST',
          // mode: "cors",
          headers: {
            'Content-Type': 'application/json',
            'Authorization': "Bearer " + token
          },
          body: JSON.stringify(data)
        })
          .then(function (response) {
            if (response.ok) {
              // A requisição deu certo
              return response.json();
            } else {
              // A requisição falhou
              throw new Error('Erro na requisição: ' + response.status);
            }
          })
          .then(function (data) {
            //resposta do servidor

            const respostaHospedagens = {
              content: [
                {
                  id: 1,
                  titulo: "Brisas do Farol",
                  tipoQuarto: "Suíte",
                  descricaoQuarto: "Estúdio inteiro • 1 banheiro • 1 cozinha • 20m²\n3 camas (2 de solteiro, 1 de casal).",
                  quantidadeReservas: "1",
                  listExtras: [
                    { id: 1, nome: "Quartos para não fumantes" },
                    { id: 2, nome: "Wi-fi gratuito" },
                    { id: 3, nome: "Recepção 24 horas" },
                    { id: 4, nome: "Bar" }
                  ],
                  listImagens: [
                    {
                      id: 2,
                      nome: "Hotel da Canoa",
                      imagem: { id: 1, nome: "Hotel da Canoa", dados: "./imagens/brisasdofarol.jpg" }
                    }
                  ],
                  existeVoo: "true",
                  existeOnibus: "true"
                },
                {
                  id: 2,
                  titulo: "Pousada Bicho do Mar",
                  tipoQuarto: "Suíte Superior",
                  descricaoQuarto: "Suíte privativa • 1 quarto • 1 sala • 1 banheiro\n1 cama de casal.",
                  quantidadeReservas: "1",
                  listExtras: [
                    { id: 1, nome: "Café da manhã incluído" }
                  ],
                  listImagens: [
                    {
                      id: 2,
                      nome: "Pousada Bicho do Mar",
                      imagem: { id: 1, nome: "Pousada Bicho do Mar", dados: "./imagens/pousadabichodomar.jpg" }
                    }
                  ],
                  existeVoo: "true",
                  existeOnibus: "true"
                },
                {
                  id: 3,
                  titulo: "Hotel da Canoa",
                  tipoQuarto: "Quarto Duplo Standard",
                  descricaoQuarto: "1 cama de casal grande • 1 banheiro • 450 m da praia.",
                  quantidadeReservas: "5",
                  listExtras: [
                    { id: 1, nome: "Café da manhã incluído" },
                    { id: 2, nome: "Piscina" }
                  ],
                  listImagens: [
                    {
                      id: 2,
                      nome: "Hotel da Canoa",
                      imagem: { id: 1, nome: "Hotel da Canoa", dados: "./imagens/hoteldacanoa.jpg" }
                    }
                  ],
                  existeVoo: "true",
                  existeOnibus: "true"
                }
              ]
            };

            // área de manipulação da resposta

            var token = data.token;

            // armazenar no localstorage 
            localStorage.setItem("token", token);
            console.log(token)

            localStorage.setItem('respostaHospedagens', JSON.stringify(respostaHospedagens));

            localStorage.setItem('dataIdaUrl', JSON.stringify(data.content.dataIda));

            localStorage.setItem('dataVoltaUrl', JSON.stringify(data.content.dataVolta));

            // redireciona para outra página
            window.location.href = '../Eyre/opcoesJornada/index.html';
          })
          .catch(function (error) {
            // em caso de erro
            console.error('Erro:', error);
          });

      } else {
        // caso as duas datas não sejam selecionadas
        console.error("Selecione um intervalo de datas válido.");
      }
      // limpa os campos do form
      document.getElementById('formularioViagem').reset();
      event.preventDefault();
    }
    function enviarRequisicaoComToken(url, metodo, dados) {

      var token = localStorage.getItem("token");
      console.log(token);
      return fetch(url, {
        method: metodo,
        mode: "cors",
        headers: {
          "Content-Type": "application/json",
          'Authorization': "Bearer " + token,
        },
        body: JSON.stringify(dados)
      })
        .then(response => {
          if (response.ok) {
            return response.json();
          } else {
            throw new Error("Erro na requisição: " + response.status);
          }
        })
        .catch(error => {
          console.error(error);
        });
    }
  </script>
  <script>
    window.onload = function () {
      var email = localStorage.getItem('email');

      if (email) {
        document.getElementById('entrarOuCadastrar').innerHTML = '<h3>Olá, ' + email + '</h3>';
      }
    };
  </script>
  <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
  <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
  <script type="text/javascript" src="./home/script.js"></script>
</body>

</html>